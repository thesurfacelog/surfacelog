@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/* --- BROKEN BROKEN SCANLINE --- */

/* Allow smooth interpolation of our custom properties */
@property --sx {
  syntax: "<length>";
  inherits: false;
  initial-value: 0px;
}
@property --sy {
  syntax: "<length>";
  inherits: false;
  initial-value: 0px;
}
@property --so {
  syntax: "<number>";
  inherits: false;
  initial-value: 1;
}

/* The scan glow uses CSS variables for transform + opacity */
.scan-glow {
  --sx: 0px;
  --sy: 0px;
  --so: 1;

  transform: translateX(var(--sx)) translateY(var(--sy));
  opacity: var(--so);
  filter: brightness(1.5);

  /* BRIGHT CORE + AURA */
  box-shadow:
    0 0 4px rgba(134, 239, 172, 0.9),
    0 0 10px rgba(134, 239, 172, 0.7),
    0 0 22px rgba(134, 239, 172, 0.45),
    0 0 36px rgba(134, 239, 172, 0.25);

  animation:
    brokenSweep 4300ms linear infinite,
    brokenGate 7100ms steps(1) infinite,
    brokenJitter 1900ms steps(1) infinite,
    brokenKick 5200ms steps(1) infinite;

  will-change: transform, opacity;
}

/* Sweep alternates direction + has weird stalls */
@keyframes brokenSweep {
  /* start left */
  0%   { --sx: -520px; }
  8%   { --sx: -300px; }
  16%  { --sx: -80px; }

  /* stall */
  20%  { --sx: -60px; }
  24%  { --sx: -60px; }

  /* jump forward */
  26%  { --sx: 140px; }
  32%  { --sx: 340px; }
  40%  { --sx: 520px; }

  /* drop out & hard reset */
  45%  { --sx: 520px; }
  46%  { --sx: 520px; }

  /* reverse sweep (right -> left) */
  50%  { --sx: 520px; }
  58%  { --sx: 260px; }

  /* micro-stall */
  62%  { --sx: 220px; }
  66%  { --sx: 220px; }

  /* snap backward */
  68%  { --sx: 20px; }
  76%  { --sx: -220px; }
  84%  { --sx: -420px; }
  100% { --sx: -520px; }
}

/* Opacity gating at irregular moments (signal loss) */
@keyframes brokenGate {
  0%, 6%, 13%, 19%, 27%, 33%, 41%, 52%, 61%, 73%, 81%, 92%, 100% { --so: 1; }
  7%  { --so: 0.15; }
  14% { --so: 0.55; }
  20% { --so: 0.0; }
  28% { --so: 0.25; }
  34% { --so: 0.0; }
  42% { --so: 0.35; }
  53% { --so: 0.1; }
  62% { --so: 0.0; }
  74% { --so: 0.2; }
  82% { --so: 0.0; }
  93% { --so: 0.4; }
}

/* Vertical jitter happens often, but not constantly */
@keyframes brokenJitter {
  0%, 10%, 18%, 30%, 40%, 52%, 60%, 74%, 82%, 100% { --sy: 0px; }
  6%  { --sy: -1px; }
  12% { --sy: 1px; }
  16% { --sy: -2px; }
  22% { --sy: 2px; }
  34% { --sy: -1px; }
  38% { --sy: 1px; }
  56% { --sy: 2px; }
  66% { --sy: -2px; }
  78% { --sy: 1px; }
  86% { --sy: -1px; }
}

/* Occasional violent “kick” (teleport) */
@keyframes brokenKick {
  0%, 24%, 25%, 49%, 50%, 79%, 80%, 100% { /* do nothing */ }
  26% { --sx: 520px; --sy: -2px; --so: 0.0; }
  27% { --sx: 120px; --sy: 2px;  --so: 1; }
  51% { --sx: -520px; --sy: 2px; --so: 0.0; }
  52% { --sx: 60px;   --sy: -1px; --so: 1; }
  81% { --sx: 520px;  --sy: 1px;  --so: 0.0; }
  82% { --sx: -140px; --sy: -2px; --so: 1; }
}
